%%writefile app.py
import streamlit as st
from PIL import Image
import hashlib
import random

st.title("TrustScan AI - Fake/Scam Content Detector")

st.write("Upload an image or text file to check authenticity:")

uploaded_file = st.file_uploader("Choose a file", type=["png", "jpg", "jpeg", "txt"])

def analyze_content(file):
    if file.type.startswith("image"):
        result = random.choice(["Verified ✅", "Not Verified ❌"])
    else:
        content = file.read().decode("utf-8")
        result = "Not Verified ❌" if "scam" in content.lower() else "Verified ✅"
    return result

def get_hash(file_bytes):
    return hashlib.sha256(file_bytes).hexdigest()

if uploaded_file is not None:
    st.write("Scanning...")
    result = analyze_content(uploaded_file)
    st.write(f"Result: **{result}**")

    uploaded_file.seek(0)
    proof_hash = get_hash(uploaded_file.read())
    st.write(f"Verification Hash (proof): `{proof_hash}`")
